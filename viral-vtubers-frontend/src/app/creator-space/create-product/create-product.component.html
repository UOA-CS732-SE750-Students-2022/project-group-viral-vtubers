<div class="container">
  <div class="edit-container">
    <h4>Upload Product</h4>
    <hr />
    <p class="edit-cover-image-counter">0/1</p>
    <div class="edit-side-container">
      <div class="edit-fields">
        <p>Product Title</p>
        <input class="title-input" placeholder="Loli Gyaru" />
        <p>Category</p>
        <div class="category-input" *ngIf="selectedSubCategory">
          Accessories > Underwear
          <span class="category-change" (click)="showChange()">
            Change category
          </span>
        </div>
        <div
          *ngIf="!selectedSubCategory"
          class="category-input category-empty-select"
          (click)="showChange()"
        >
          + Select Category
        </div>
        <p class="title-tags">Tags</p>
        <app-tags class="tags"></app-tags>
      </div>
      <div class="edit-cover-image">
        <p class="title">
          <img src="assets/icons/UploadIcon.svg" alt="upload-icon" />
          Upload product asset
        </p>
        <p>
          This is the file that the buyer would be getting when they purchase
          your item!
        </p>
        <p>.vrm .vroid .zip</p>
        <input type="file" />
      </div>
    </div>
    <p
      class="edit-gallery-images-counter"
      [style.color]="images.length === 10 ? '#fb7299' : '#dddddd'"
    >
      {{ images.length }}/10
    </p>
    <div class="edit-gallery-images" *ngIf="images.length === 0">
      <img src="assets/icons/UploadIcon.svg" alt="upload-icon" />
      <div>
        <p class="title">Upload cover photo<span>.png .jpg</span></p>
        <p>Other photos that will be displayed in the product gallery</p>
      </div>
      <input type="file" />
    </div>

    <div
      class="edit-gallery-images-fill"
      *ngIf="images.length !== 0"
      cdkDropListOrientation="horizontal"
      cdkDropList
      (cdkDropListDropped)="drop($event)"
    >
      <div
        class="edit-gallery-image-container"
        *ngFor="let image of images"
        cdkDrag
        (click)="removeImage(image)"
      >
        <div>&times;</div>
        <img class="edit-gallery-image" [src]="image" />
      </div>
      <div>
        +
        <input type="file" />
      </div>
    </div>

    <p class="description-label">Description</p>
    <textarea
      rows="8"
      class="description-input"
      type="text"
      placeholder="Describe your artwork in detail. Include everything that your buyer might need to know about this product. "
    ></textarea>
    <p>Visible to</p>
    <div class="checkboxes">
      <input type="radio" name="visible" [defaultChecked]="true" />
      <p>All Ages</p>
      <span></span>
      <input type="radio" name="visible" />
      <p>R18</p>
    </div>

    <p>Sensitive Content</p>
    <div class="checkboxes">
      <input type="checkbox" name="sensitive" />
      <p>Furry</p>
      <input type="checkbox" name="sensitive" />
      <p>BL/Yaoi</p>
      <input type="checkbox" name="sensitive" />
      <p>GL/Yuri</p>
      <input type="checkbox" name="sensitive" />
      <p>Gore</p>
    </div>

    <p>Allow Comments</p>
    <div class="checkboxes">
      <input type="radio" name="comments" [defaultChecked]="true" />
      <p>ON</p>
      <span></span>
      <input type="radio" name="comments" />
      <p>OFF</p>
    </div>

    <p class="product-variants">Product Variants</p>
    <div
      class="product-variant"
      *ngFor="let variant of variants; let i = index"
      [@inOutAnimation]
    >
      <a class="close" (click)="removeVariantIndex(i)"> &times; </a>
      <div class="variant-left">
        <p>Product variant name</p>
        <input
          class="name-input"
          placeholder="VRM + VROID - Shogun/Genshin Impact"
        />
        <p>File type(s) included</p>
        <input class="vrm-input" placeholder="Loli Gyaru" />
        <p>Price</p>
        <div class="checkboxes dollars">
          <input type="radio" name="price-{{ i }}" [defaultChecked]="true" />
          <span>$</span>
          <input class="price-input" placeholder="69.95" />
          <p>USD</p>
          <input type="radio" name="price-{{ i }}" />
          <p>Free</p>
        </div>
      </div>
      <div class="variant-right">
        <div class="variant-image">
          <p class="title">
            <img src="assets/icons/UploadIcon.svg" alt="upload-icon" />
            Upload product asset
          </p>
          <p class="details">
            This is the file that the buyer would be getting when they purchase
            your item!
          </p>
          <p>.vrm .vroid .zip</p>
          <input type="file" />
        </div>
      </div>
    </div>

    <div class="product-variant product-add" (click)="addVariant()">
      + Add another product variant
    </div>

    <div class="save-section">
      <button class="save-draft-button">SAVE A DRAFT</button>
      <button class="save-publish-button">UPLOAD</button>
    </div>
  </div>
</div>

<div class="overlay" *ngIf="changePopup" [@inOutAnimation]>
  <div class="popup">
    <p class="title">Categories</p>
    <a class="close" (click)="hideChange()"> &times; </a>
    <p>Available Categories:</p>
    <div>
      <div
        *ngFor="let category of getAllCategories()"
        class="category"
        (click)="openCategory(category)"
      >
        <p>
          {{ category.name }}
          <span
            class="chevron-icon"
            [style.transform]="
              selectedCategory?.id === category.id
                ? 'rotate(90deg)'
                : 'rotate(0deg)'
            "
          >
            <div
              [style.backgroundColor]="
                selectedCategory?.id === category.id ? '#fb7299' : '#aaaaaa'
              "
              src="assets/icons/ChevronIcon.svg"
            ></div>
          </span>
        </p>
        <div
          [style.maxHeight]="
            selectedCategory?.id === category.id
              ? 28 * category.subcategories.length + 'px'
              : '0'
          "
        >
          <div
            *ngFor="let subcategory of category.subcategories"
            class="subcategory"
            (click)="changeCategory(subcategory)"
          >
            {{ subcategory.name }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
